<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Website</title>
    <link rel="stylesheet" href="./style_v2.css">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
</head>
<body>


    <center><h1>Welcome to My Website</h1></center>

    <center><p id="api">0</p></center>

    <center><p id="error"></p></center>

    <center>

        <input type="radio" id="ModeSelectTitle" name="ModeSelect" value="title" onclick=showTitle();>
        <label for="html">Title Search</label>

        <input type="radio" id="ModeSelectIngredient" name="ModeSelect" value="ingredient">
            <label for="html">Ingredient Search</label>

    </center>



    <div class="button_center" id="buttons" style="display:none">
        
        <button id="btn"  type="search" onclick=search()>Click Me!</button>
        <input id="form" type="text">
        
        <!-- <input id="form2" type="text"> -->
        
    </div>
    <br>


    <div class="images" id="img_container" style="display:none">

        <img src="./image_1.jpg" alt="#" id="image1" height="200" width="300" >
        <img src="./image_2.jpg" alt="#" id="image2" height="200" width="300" >
        <img src="./image_3.jpg" alt="#" id="image3" height="200" width="300" >

    </div>
    
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<script>


    var counter = 0
    var restore = document.getElementById('img_container')
    var saved = restore.innerHTML
    var img1 = document.getElementById('image1')
    var img2 = document.getElementById('image2')
    var img3 = document.getElementById('image3')
    var titleBtn = document.getElementById('ModeSelectTitle')
    var titleInput = document.getElementById('buttons')

    function search() {

        api()
        sendFormData()
        if (counter % 2 == 0) {
            img1.src = "./image_4.jpg";
            img2.src = "./image_5.jpg";
            img3.src = "./image_6.jpg";
            var restore = document.getElementById('img_container')
            var saved = restore.innerHTML
        } else {
            img1.src = "./image_1.jpg";
            img2.src = "./image_2.jpg";
            img3.src = "./image_3.jpg";
            var restore = document.getElementById('img_container')
            var saved = restore.innerHTML
        }

        if (counter > 0) {
            
            restore.innerHTML = "";
            restore.innerHTML = saved;
            
        }

        document.getElementById('img_container').style.display='flex';
        counter++
    }





    function api() {

        /// Kyle Continue work here. We need the website to change into "nightmode" is the counter displays 0
        var apiCounter = document.getElementById('api').innerText = Math.floor(Math.random() * 5);
        var errorText = document.getElementById('error').innerText
        if (apiCounter == 0) { 
            errorText = "OUT OF CREDIT"
        }
    }


    function sendFormData() {
        // URL = "http://localhost:8080/test"
        // var input = {"num1":document.getElementById('form1').value, "num2":document.getElementById('form2').value};

        var input = {"data":document.getElementById('form').value};

        // $.ajax({
        // type: "POST",
        // url: URL,
        // data: JSON.stringify({ "data": document.getElementById('form').value}),
        // contentType: "application/json",
        // success: function (result) {
        //     console.log(result);
        //     //if(result == "Account Successfully Created!"){
        //     //register_success();
        //     // }else{
        //     // register_error(result);
        //     // }
        // },
        // error: function (result) {
        //     console.log(result);
        //     // document.getElementById("error").innerText = 'Error trying to connect';
        //     // document.getElementById("error").style.color = 'red';
        // }
        // });}




        console.log(JSON.stringify(input));

        fetch("http://localhost:8080/test", {
        method: "POST",
        headers: {mode: 'cors', 'Content-Type': 'application/json'}, 
        body: JSON.stringify(input)
        }).then(res => {
        
        console.log("Request complete! response:", res);
        });
            }

    
    function showTitle() {

        console.log("Hellllooo");
        if (titleBtn.checked) {
            //console.log(titleBtn.checked);
            titleInput.style.display = "flex";
            console.log("On");
        } else {
            titleInput.style.display = "hidden";
            console.log("Off")
        }
    }


</script>

</body>
</html>